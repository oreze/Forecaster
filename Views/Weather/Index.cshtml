@using System.Net
@using Forecaster.Models.Enums
@using Forecaster.Models.OpenWeather.Partial
@using Forecaster.Services
@using Forecaster.Utils
@using Serilog
@model (Forecaster.Models.OpenWeather.CityWeather CurrentWeather, System.Net.HttpStatusCode Code)
@{
    ViewData["Title"] = "XD";
    var weather = Model.CurrentWeather.Weather.First();
}

<div class="weather">
    @switch (Model.Code)
    {
        case HttpStatusCode.OK:
            <div class="weather-header">
                <ul class="weather-header-list">
                    <li class="weather-item">
                        <h1>@Model.CurrentWeather.Name</h1>
                        <p>@Model.CurrentWeather.GetCountry()</p>
                    </li>
                    <li class="weather-item coordinates">
                        <p>@Model.CurrentWeather.GetCoordsDirections(GeoCoordinate.Latitude)</p>
                        <p>@Model.CurrentWeather.GetCoordsDirections(GeoCoordinate.Longitude)</p>
                    </li>
                </ul>
            </div>
            <div class="weather-body">
                <ul class="weather-body-list">
                    <li class="weather-item weather-icon">
                        <img src="@Model.CurrentWeather.GetIconSourceUri(IconSize.Four)" alt="@weather?.Description">
                        <p class="icon-description">@weather?.Description.Capitalize()</p>
                    </li>
                    <li class="weather-item temperature">
                        <p class="temperature-current">
                            @Model.CurrentWeather.GetFormattedTemperature()
                            <span>°C</span>
                        </p>
                        <p class="temperature-feel">
                            <span>Feels like </span>
                            @Model.CurrentWeather.GetFormattedFeelsLikeTemperature()
                            <span>°C</span>
                        </p>
                    </li>
                    <li class="weather-item temp-min-max">
                        <p>Daily</p>
                        <div>
                            <p>
                                @Model.CurrentWeather.GetFormattedMinTemperature()
                                <span>°C</span>
                            </p>
                            <span class="divider"> to </span>
                            <p>
                                @Model.CurrentWeather.GetFormattedMaxTemperature()
                                <span>°C</span>
                            </p>
                        </div>
                    </li>

                </ul>

                <ul class="weather-body-list">
                    <li class="weather-item">
                        <p>Pressure</p>
                        <p>@Model.CurrentWeather.Main.Pressure hPa</p>
                    </li>
                    <li class="weather-item">
                        <p>Humidity</p>
                        <p>
                            @Model.CurrentWeather.Main.Humidity
                            <span>%</span>
                        </p>
                    </li>
                    <li class="weather-item">
                        <p>Wind</p>
                        <div>
                            <p>
                                @Model.CurrentWeather.GetRoundedWind()
                                <span>km/h</span>
                            </p>
                            <p>@Model.CurrentWeather.GetWindDirection()</p>
                        </div>
                    </li>
                    <li class="weather-item">
                        <p>Cloudy</p>
                        <p>
                            @Model.CurrentWeather.Clouds.All
                            <span>%</span>
                        </p>
                    </li>
                    <li class="weather-item">
                        <p>Visibility</p>
                        <p>@Model.CurrentWeather.GetVisibility()</p>
                    </li>
                </ul>
                <ul class="weather-body-list">
                    <li class="weather-item">
                        <p>Sunrise</p>
                        <p>@Model.CurrentWeather.GetSunriseTime()</p>
                    </li>
                    <li class="line-divide"></li>
                    <li class="weather-item">
                        <p>Sunset</p>
                        <p>@Model.CurrentWeather.GetSunsetTime()</p>
                    </li>
                </ul>
            </div>
            break;
        case HttpStatusCode.NotFound:
            <p>This location doesn`t exist. Try again.</p>
            break;
        default:
            <p>Something went wrong. Try again.</p>
            break;
    }
</div>